<div class="category-container">
  <mat-card>
    <mat-card-title fxLayoutAlign="start center">{{categoryName}}</mat-card-title>
    <mat-card-subtitle fxLayout="row" fxLayout.lt-sm="column" fxLayoutAlign="space-between start"
                       fxLayoutAlign.lt-sm="start start">
      <div class="sort-by">
        <mat-form-field>
          <mat-select (selectionChange)="changeSortOption()" [(ngModel)]="selectedSortOption">
            <mat-option *ngFor="let option of sortOptions" [disabled]="option.disabled"
                        [value]="option.title">{{option.title}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <mat-paginator (page)="changePage($event)"
                     [length]="products.total"
                     [pageSizeOptions]="[5, 10, 15, 25, 50, 100]"
                     [pageSize]="products.size"
                     fxHide.lt-sm="true"
                     showFirstLastButtons>
      </mat-paginator>
    </mat-card-subtitle>
    <mat-card-content fxLayout.gt-xs="row wrap" fxLayout.lt-sm="column" fxLayoutAlign.gt-xs="space-around start"
                      fxLayoutAlign.lt-sm="center center">
      <mat-card *ngFor="let product of products.collection" class="product-card" fxLayout="column"
                fxLayoutAlign="space-between center">
        <mat-card-header (click)="openProductPage(product)" class="pointer">
          <mat-card-title>{{product.title}}</mat-card-title>
        </mat-card-header>
        <img (click)="openProductPage(product)" *ngIf="product.imgUrl" [src]="product.imgUrl"
             alt="Zdjęcie produktu {{product.title}}" class="pointer" mat-card-image>
        <mat-card-content class="product-card-content" fxLayout="column" fxLayoutAlign="center space-between">
          <p class="truncate">
            {{product.description}}
          </p>
          <div fxLayout="row" fxLayoutAlign="start center">
            <star-rating [readonly]="isStarRatingReadonly" [value]="product.averageRate" checkedcolor="#F7B000"
                         size="24px" uncheckedcolor="black"></star-rating>
            <span>({{getRatesCount(product.rates)}})</span>
          </div>
          <div fxLayout="row" fxLayoutAlign="space-between center">
            <span class="price">{{product.salePriceGross | currency:'PLN'}}</span>
            <a (click)="addToCart(product)" [disabled]="isProductAddedToCart(product)"
               aria-label="Dodaj produkt do koszyka" mat-button>
              <mat-icon>add_shopping_cart</mat-icon>
              <span *ngIf="!isProductAddedToCart(product)">Dodaj do koszyka</span>
              <span *ngIf="isProductAddedToCart(product)">Dodano do koszyka</span>
            </a>
          </div>
        </mat-card-content>
      </mat-card>
      <span *ngIf="isCollectionEmpty()">Brak produktów!</span>
    </mat-card-content>
    <mat-card-footer>
      <mat-paginator (page)="changePage($event)"
                     [length]="products.total"
                     [pageSizeOptions]="[5, 10, 15, 25, 50, 100]"
                     [pageSize]="products.size"
                     showFirstLastButtons>
      </mat-paginator>
    </mat-card-footer>
  </mat-card>
</div>
